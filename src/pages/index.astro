---
import Layout from '../layouts/Layout.astro';
import SectionTitle from '../components/SectionTitle.astro';
import TattooCard from '../components/TattooCard.astro';
import { getCollection } from 'astro:content';

const tattoos = await getCollection('tattoos', ({ data }) => {
  return data.status === 'done';
});
const latestTattoos = tattoos.sort((a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf()).slice(0, 3);
---

<Layout title="KRAM INK | Tattoo Artist">
	<!-- HERO SECTION -->
	<section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-20">
		<div class="absolute inset-0 z-0 grid grid-cols-2 opacity-40">
            <!-- Placeholder images for Hero - using divs with bg-color for now if no images -->
			<div class="bg-gray-800 h-full w-full bg-[url('https://images.unsplash.com/photo-1598371839696-5c5e62d5048d?q=80&w=2787&auto=format&fit=crop')] bg-cover bg-center"></div>
			<div class="bg-gray-900 h-full w-full bg-[url('https://images.unsplash.com/photo-1611501275019-9b5cda994e8d?q=80&w=2787&auto=format&fit=crop')] bg-cover bg-center grayscale"></div>
		</div>
        
        <div class="absolute inset-0 bg-gradient-to-b from-black/80 via-transparent to-[#050505] z-10"></div>

		<div class="relative z-20 text-center flex flex-col items-center">
            <span class="text-[var(--color-teal)] font-bold tracking-[0.3em] uppercase mb-4 animate-pulse">
                Stories on Skin
            </span>
			<h1 class="text-7xl md:text-[10rem] font-heading font-bold uppercase leading-[0.8] mix-blend-overlay text-white opacity-90">
				A Touch<br/>
                <span class="text-outline">Of Ink</span>
			</h1>
            <a href="/booking" class="mt-12 px-10 py-4 bg-white text-black font-heading font-bold uppercase tracking-widest hover:bg-[var(--color-teal)] hover:text-white transition-colors">
                Book Your Session
            </a>
		</div>
	</section>

	<!-- INTRO SECTION -->
	<section class="py-24 px-4 relative bg-[#050505]">
        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-16 items-center">
            <div class="relative">
                 <!-- Aesthetic image collage placeholder -->
                 <div class="w-full aspect-[3/4] bg-gray-900 overflow-hidden relative grayscale hover:grayscale-0 transition-all duration-700">
                    <img src="https://images.unsplash.com/photo-1562962230-16e4623d36e6?q=80&w=2787&auto=format&fit=crop" alt="Artist Profile" class="object-cover w-full h-full" />
                 </div>
                 <div class="absolute -bottom-10 -right-10 w-2/3 aspect-square bg-[var(--color-teal)]/20 z-[-1]"></div>
            </div>
            
            <div>
                <SectionTitle title="New Tattoo Destine" subtitle="Stories on Skin" align="left" />
                
                <p class="text-gray-400 text-lg leading-relaxed mb-8">
                    Je ne suis pas juste un tatoueur, je suis un narrateur. Chaque pièce est conçue pour raconter une partie de votre histoire. Spécialisé dans le Blackwork et le Néotraditionnel, je transforme vos idées en art éternel.
                </p>
                <a href="/gallery" class="inline-block border-b-2 border-[var(--color-teal)] pb-1 text-xl font-heading uppercase tracking-widest hover:text-[var(--color-teal)] transition-colors">
                    More About Me
                </a>
            </div>
        </div>
	</section>

	<!-- STYLES SECTION -->
	<section class="py-24 bg-black relative overflow-hidden">
         <div class="absolute top-0 right-0 w-full h-full opacity-10 pointer-events-none">
            <span class="absolute top-10 right-[-10%] text-[15rem] font-heading font-bold uppercase text-outline rotate-12">Studio</span>
         </div>

         <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center px-4">
            <div>
                <SectionTitle title="Tattoo Studio" subtitle="Expertise" align="left" />
                
                <ul class="flex flex-col gap-4 mt-8 items-start">
                    {['Japanese Tattoo', 'Geometric Tattoo', 'Blackwork Tattoo', 'Dotwork Tattoo', 'Realistic Tattoo'].map((style, index) => (
                        <li class={`
                            bg-white text-black font-heading font-bold uppercase text-2xl md:text-4xl px-6 py-2 transform transition-transform hover:scale-105 cursor-default
                            ${index === 2 ? 'bg-[var(--color-teal)] text-white -rotate-2 shadow-[0_0_30px_rgba(44,122,123,0.5)]' : index % 2 === 0 ? 'rotate-1' : '-rotate-1'}
                        `}>
                            {style}
                        </li>
                    ))}
                </ul>
            </div>
            <div class="relative h-[600px] hidden md:block">
                 <img src="https://images.unsplash.com/photo-1605304677764-77e48b8981d5?q=80&w=2787&auto=format&fit=crop" class="absolute top-10 right-10 w-3/4 h-3/4 object-cover filter contrast-125 grayscale" alt="Studio Vibe" />
            </div>
         </div>
	</section>

	<!-- GALLERY PREVIEW -->
	<section class="py-24 px-4 bg-[#050505]">
        <SectionTitle title="Our Gallery" subtitle="Featured Work" />
        
        <div class="max-w-7xl mx-auto grid md:grid-cols-3 gap-8 mt-16">
            {latestTattoos.map(tattoo => (
                <TattooCard 
                    title={tattoo.data.title}
                    image={tattoo.data.image}
                    tags={tattoo.data.tags}
                    slug={tattoo.slug}
                />
            ))}
            <!-- Fallback if no tattoos -->
            {latestTattoos.length === 0 && (
                <div class="col-span-3 text-center py-20 border border-white/10 border-dashed">
                    <p class="text-gray-500 uppercase font-heading text-xl">Aucun tatouage publié pour le moment.</p>
                </div>
            )}
        </div>
        
        <div class="text-center mt-16">
             <a href="/gallery" class="px-8 py-3 bg-transparent border border-white text-white font-heading font-bold uppercase tracking-wider hover:bg-white hover:text-black transition-colors">
                Check our Work
            </a>
        </div>
	</section>
</Layout>
