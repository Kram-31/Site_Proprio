---
import '../styles/global.css';
import '@fontsource/cinzel';
import '@fontsource/inter';
import { Image } from 'astro:assets';
import logoImage from '../assets/logo.jpg';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="fr" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="L'Art Mûri - Mickaël Kalfayan - Artiste Tatoueur à Mirepoix" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title} | L'Art Mûrit</title>
	</head>
	<body class="bg-[#050505] text-white min-h-screen flex flex-col">
		<!-- Minimal Header -->
		<header class="fixed w-full z-50 top-0 left-0 px-4 md:px-8 py-4 md:py-6 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent backdrop-blur-[2px]">
			<a href="/" class="flex items-center gap-3 group relative z-50">
                <div class="w-10 h-10 md:w-16 md:h-16 rounded-full overflow-hidden border border-white/20 group-hover:border-[var(--color-primary)] transition-colors shrink-0">
                    <Image src={logoImage} alt="Logo L'Art Mûrit" class="w-full h-full object-cover" />
                </div>
				<span class="text-lg md:text-xl font-bold tracking-tighter uppercase font-heading">
				L'Art <span class="text-[var(--color-primary)]">Mûrit</span>
				</span>
			</a>
			<nav class="hidden md:flex gap-8 text-sm tracking-widest uppercase font-medium">
				<a href="/" class="hover:text-[var(--color-primary)] transition-colors">Accueil</a>
				<a href="/gallery" class="hover:text-[var(--color-primary)] transition-colors">Portfolio</a>
				<a href="/booking" class="hover:text-[var(--color-primary)] transition-colors">Réservation</a>
			</nav>
            <button id="mobile-menu-btn" class="md:hidden text-[var(--color-primary)] hover:text-white transition-colors relative z-50 focus:outline-none p-2 border border-[var(--color-primary)] rounded bg-black/50 backdrop-blur-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <!-- Mobile Menu Overlay -->
            <div id="mobile-menu-overlay" class="fixed inset-0 bg-black/80 z-40 hidden md:hidden glass-overlay trigger-close"></div>

            <!-- Mobile Sidebar -->
            <aside id="mobile-menu" class="fixed top-0 right-0 w-80 h-screen bg-[#050505] z-50 transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col border-l border-white/10 md:hidden overflow-y-auto">
                <div class="h-20 flex items-center justify-end px-4 border-b border-white/10">
                    <button class="text-white hover:text-[var(--color-primary)] trigger-close font-heading font-bold uppercase tracking-widest text-sm flex items-center gap-2">
                        Fermer
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <div class="flex flex-col gap-6 p-8">
                    <a href="/" class="group relative w-full py-6 bg-white/5 border border-[var(--color-primary)] hover:border-[var(--color-primary)] transition-all duration-500 overflow-hidden mobile-link">
                         <div class="absolute inset-0 bg-[var(--color-primary)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-500"></div>
                         <div class="relative z-10 font-heading font-bold uppercase text-2xl tracking-[0.2em] text-white text-center">
                            Accueil
                         </div>
                         <!-- Corners -->
                         <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                    </a>

                    <a href="/gallery" class="group relative w-full py-6 bg-white/5 border border-[var(--color-primary)] hover:border-[var(--color-primary)] transition-all duration-500 overflow-hidden mobile-link">
                         <div class="absolute inset-0 bg-[var(--color-primary)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-500"></div>
                         <div class="relative z-10 font-heading font-bold uppercase text-2xl tracking-[0.2em] text-white text-center">
                            Portfolio
                         </div>
                          <!-- Corners -->
                         <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                    </a>

                    <a href="/booking" class="group relative w-full py-6 bg-white/5 border border-[var(--color-primary)] hover:border-[var(--color-primary)] transition-all duration-500 overflow-hidden mobile-link">
                         <div class="absolute inset-0 bg-[var(--color-primary)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-500"></div>
                         <div class="relative z-10 font-heading font-bold uppercase text-2xl tracking-[0.2em] text-white text-center">
                            Réservation
                         </div>
                          <!-- Corners -->
                         <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                         <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-white/20 group-hover:border-[var(--color-primary)] transition-colors"></div>
                    </a>
                </div>
            </aside>
		</header>

		<main class="flex-grow pt-24">
			<slot />
		</main>

        <script>
            const menuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            const closeTriggers = document.querySelectorAll('.trigger-close');
            const mobileLinks = document.querySelectorAll('.mobile-link');

            if (menuBtn && mobileMenu && overlay) {
                // Open Menu
                menuBtn.addEventListener('click', () => {
                    mobileMenu.classList.remove('translate-x-full');
                    overlay.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; // Prevent background scrolling
                });

                // Close Menu Logic
                const closeMenu = () => {
                    mobileMenu.classList.add('translate-x-full');
                    overlay.classList.add('hidden');
                    document.body.style.overflow = '';
                };

                closeTriggers.forEach(trigger => {
                    trigger.addEventListener('click', closeMenu);
                });

                mobileLinks.forEach(link => {
                    link.addEventListener('click', closeMenu);
                });
            }
        </script>

		<!-- Bold Footer -->
		<footer class="bg-black py-20 px-4 md:px-10 border-t border-white/10 relative overflow-hidden">
            <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 relative z-10">
                <div class="flex flex-col items-center md:items-start text-center md:text-left">
                     <h2 class="text-6xl md:text-8xl font-heading font-bold uppercase leading-[1.0] mb-8">
                        L'Art<br/>
                        <span class="text-outline">Mûrit</span>
                    </h2>
                    <p class="text-gray-400 max-w-md font-light mx-auto md:mx-0">
                        Art corporel unique et personnalisé. Chaque projet est une collaboration pour marquer votre histoire.
                    </p>
                    <div class="mt-8 pt-8 border-t border-white/10">
                        <p class="font-heading font-bold uppercase tracking-widest text-sm text-[var(--color-primary)]">L'Art Mûrit</p>
                        <p class="text-gray-400 text-sm mt-1">67 rue Victor Hugo<br/>09500 Mirepoix</p>
                    </div>
                </div>
                <div class="flex flex-col justify-end items-center md:items-end gap-4">
                    <a href="/booking" class="px-8 py-3 bg-[var(--color-primary)] text-white font-heading font-bold uppercase tracking-wider hover:bg-white hover:text-black transition-colors">
                        Prendre RDV
                    </a>

                    <div class="flex gap-6 mt-2">
                        <a href="https://www.instagram.com/lartmurit/?hl=fr" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white uppercase text-sm tracking-widest">Instagram</a>
                        <a href="mailto:contact@lartmuri.com" class="text-gray-400 hover:text-white uppercase text-sm tracking-widest">Email</a>
                    </div>
                </div>
            </div>
            <!-- Background Text Decoration -->
            <div class="absolute bottom-[-5%] left-0 w-full text-center pointer-events-none select-none opacity-5">
                <span class="text-[12rem] md:text-[20rem] font-heading font-bold uppercase text-white whitespace-nowrap">
                    L'ART MÛRIT
                </span>
            </div>
		</footer>
	</body>
</html>
